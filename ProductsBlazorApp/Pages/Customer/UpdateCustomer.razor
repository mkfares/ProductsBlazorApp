@page "/Customer/Update/{Id:int}"

@*@inject NavigationManager NavigationManager*@

@inject CustomerService Service

<h3>Update Customer Information</h3>

<EditForm Model="customer" OnValidSubmit="EditCustomer">
    <DataAnnotationsValidator />
    @*<ValidationSummary />*@

    <div class="form-group">
        <label for="email">Email</label>
        <InputText type="email" id="email" @bind-Value="customer.Email" class="form-control" />
        <ValidationMessage For="@(() => customer.Email)" />
    </div>

    <div class="form-group">
        <label for="password">Password</label>
        <InputText type="password" placeholder="Password" id="password" @bind-Value="customer.Password" class="form-control" />
        <ValidationMessage For="@(() => customer.Password)" />
    </div>

    <button type="submit" class="btn btn-primary">Add Customer</button>
    <a href="/Customer/List" class="btn btn-info" role="button">Cancel</a>

</EditForm>

<br />

<p>@message</p>

@code {

    [Parameter]
    public int Id { get; set; }

    Customer customer = new Customer();

    string message;

    protected override void OnInitialized()
    {
        customer = Service.GetCustomer(Id);
    }

    public void EditCustomer()
    {
        // Update the category
        Service.UpdateCustomer(customer);

        message = "Customer information updated successfully";
        //NavigationManager.NavigateTo("Customer/List");
    }
}
